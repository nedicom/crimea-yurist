{% load static wagtailcore_tags wagtailimages_tags wagtailuserbar custom_menu %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>
        {% block title %}
        {% if page.seo_title %}{{ page.seo_title }}{% else %}{{ page.title }}{% endif %}
        {% endblock %}
        {% block title_suffix %}
        {% wagtail_site as current_site %}
        {% if current_site and current_site.site_name %}- {{ current_site.site_name }}{% endif %}
        {% endblock %}
    </title>
    {% if page.search_description %}
    <meta name="description" content="{{ page.search_description }}" />
    {% else %}
    <meta name="description"
        content="Юридическая компания в Крыму с 2014 года. Услуги адвоката по гражданским, арбитражным и уголовным делам. Бесплатная консультация юриста в Симферополе, Севастополе, Ялте и других городах Крыма." />
    {% endif %}
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    {# Force all links in the live preview panel to be opened in a new tab #}
    {% if request.in_preview_panel %}
    <base target="_blank">
    {% endif %}

    {% block extra_css %}
    {# Override this in templates to add extra stylesheets #}
    {% endblock %}
    <link href="{% static 'css/output.css' %}" rel="stylesheet">
</head>

<body class="{% block body_class %}{% endblock %}">
    {% wagtailuserbar %}

    {# Header #}
    <header>
        <nav class="navbar navbar-expand-lg navbar-light bg-light p-5">
            <div class="container">
                <a class="navbar-brand" href="/">
                    {{ settings.core.SiteSettings.site_name }}
                </a>
                {% include "includes/navigation.html" %}
            </div>
        </nav>
    </header>

    {# Banner #}
    {% include "includes/frontbanner.html" %}

    {# prices #}
    {% include "includes/prices.html" %}

    {# prices #}
    {% include "includes/tableprices.html" %}

    {# description #}
    {% include "includes/description.html" %}

    {# contacts #}
    {% include "includes/contacts.html" %}

    {# reviews #}
    {% include "includes/reviews.html" %}

    {# links #}
    {% show_nested_menu %}

    {# Footer #}

    <footer class="bg-dark text-light mt-5 py-4">
        <nav class="flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-6">
            {% for page in menu_pages %}
            <a href="{{ page.url }}"
                class="block py-2 px-4 md:py-0 md:px-0 text-gray-700 hover:text-blue-600 transition-colors duration-200{% if request.path == page.url %} text-blue-600 font-semibold border-b-2 border-blue-600{% endif %}">
                {{ page.title }}
            </a>
            {% endfor %}
        </nav>
        <div class="container">
            <p>&copy; 2025 {{ settings.core.SiteSettings.site_name }}</p>
        </div>
    </footer>

    {# Global javascript #}
    <script defer type="text/javascript" src="{% static 'js/myproject.js' %}"></script>

    {% block extra_js %}
    {# Override this in templates to add extra javascript #}
    {% endblock %}


    <!-- Yandex.Metrika counter -->
    <script>
        // Загрузка метрики с задержкой
        setTimeout(function () {
            var script = document.createElement('script');
            script.src = "{% static 'js/metrika.js' %}";
            script.async = true;
            document.body.appendChild(script);
        }, 10000); // 10 секунд
    </script>
    <!-- /Yandex.Metrika counter -->

    <!-- Schema org -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": ["LegalService", "LocalBusiness"],
        "name": "{% if page.title %}{{ page.title }}{% else %}Юрист Крым{% endif %}",
        "description": "{{ page.search_description|default:'Юридические услуги в Крыму' }}",
        "telephone": "+7-978-XXX-XX-XX",
        "address": {
            "@type": "PostalAddress",
            "addressLocality": "Симферополь",
            "addressRegion": "Республика Крым"
        },
        "areaServed": "Республика Крым",
        "openingHours": "Mo-Fr 09:00-18:00", 
        "priceRange": "₽₽",
        "url": "{{ request.scheme }}://{{ request.get_host }}"
    }
    </script>
    <!-- Schema org -->

</body>

</html>